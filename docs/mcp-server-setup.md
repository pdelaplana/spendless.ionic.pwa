# MCP Server Setup Guide: Taskmaster AI & Context7

This guide provides step-by-step instructions for configuring Taskmaster AI and Context7 MCP servers for Claude Code instances to enhance development workflows with AI-powered project management and real-time knowledge gathering.

## Overview

**MCP Servers Included:**
- **Taskmaster AI**: AI-powered project planning, task generation, and PRD management
- **Context7**: Real-time information gathering and external knowledge access

## Prerequisites

- Claude Code installed and configured
- Node.js and npm available globally
- Internet connection for package installation

## Installation & Configuration

### Step 1: Install Taskmaster AI

```bash
# Install Taskmaster AI globally
npm install -g task-master-ai

# Verify installation
task-master --version
```

### Step 2: Install Context7

```bash
# Install Context7 MCP server globally
npm install -g @upstash/context7-mcp

# Verify installation (package should be available)
npx @upstash/context7-mcp --help
```

### Step 3: Configure MCP Servers in Claude Code

```bash
# Add Taskmaster AI as an MCP server
claude mcp add taskmaster-ai "npx -y --package=task-master-ai task-master-ai"

# Add Context7 as an MCP server
claude mcp add context7 "npx @upstash/context7-mcp"

# Verify both servers are configured and connected
claude mcp list
```

**Expected Output:**
```
Checking MCP server health...

context7: npx @upstash/context7-mcp - ✓ Connected
taskmaster-ai: npx -y --package=task-master-ai task-master-ai - ✓ Connected
```

### Step 4: Verify Configuration

```bash
# List all MCP servers
claude mcp

# Check Claude Code configuration
claude config list
```

## Usage Guidelines

### Taskmaster AI

**Primary Use Cases:**
- Generate implementation tasks from PRDs
- Break down complex features into manageable steps
- Create project roadmaps and development plans
- Parse PRD documents and extract actionable items

**Commands:**
```bash
# Generate tasks from PRD (requires API key configuration)
task-master parse-prd path/to/prd-file.txt

# View generated tasks
cat tasks.json
```

**Integration with Development Workflow:**
1. Create PRDs in `.taskmaster/docs/` directory
2. Use `task-master parse-prd` to generate implementation tasks
3. Follow generated tasks for systematic development
4. Update PRDs based on implementation learnings

### Context7

**Primary Use Cases:**
- Research latest documentation and best practices
- Gather real-time information for development decisions
- Access external knowledge beyond Claude's training data
- Investigate new technologies and frameworks

**When to Use Context7:**
- Need current information or latest updates
- Researching unfamiliar errors or technologies
- Seeking best practices for specific implementations
- Comparing technology options or approaches

**Integration with Development Workflow:**
- Use during problem investigation and research phases
- Access when implementing new features with external dependencies
- Gather information for technical decision making
- Research security best practices and compliance requirements

## File Organization

### Taskmaster AI File Structure

```
project-root/
├── .taskmaster/
│   ├── docs/                 # Store PRDs here
│   │   ├── feature_name.txt  # Individual feature PRDs
│   │   └── bug_fix_name.txt  # Bug investigation PRDs
│   ├── templates/
│   │   └── prd_template.txt  # Standard PRD template
│   └── tasks.json           # Generated by task-master parse-prd
```

### PRD Naming Convention

- Use descriptive, clear filenames: `change_password.txt`, `user_authentication.txt`
- Use underscores instead of spaces
- Keep names concise but meaningful
- Store all PRDs in `.taskmaster/docs/` directory

## API Key Configuration (Optional)

### Taskmaster AI API Keys

Taskmaster AI can work with various AI providers. To enable PRD parsing functionality:

1. **Anthropic (Recommended):**
   ```bash
   export ANTHROPIC_API_KEY="your-api-key"
   ```

2. **OpenAI:**
   ```bash
   export OPENAI_API_KEY="your-api-key"
   ```

3. **Perplexity (for research):**
   ```bash
   export PERPLEXITY_API_KEY="your-api-key"
   ```

### Context7 Configuration

Context7 may require additional configuration depending on usage:

```bash
# If using Upstash services
export UPSTASH_REDIS_REST_URL="your-redis-url"
export UPSTASH_REDIS_REST_TOKEN="your-redis-token"
```

## Troubleshooting

### Common Issues

**1. MCP Server Not Connected**
```bash
# Check if packages are installed globally
npm list -g task-master-ai
npm list -g @upstash/context7-mcp

# Reinstall if needed
npm install -g task-master-ai @upstash/context7-mcp

# Remove and re-add MCP servers
claude mcp remove taskmaster-ai
claude mcp remove context7
claude mcp add taskmaster-ai "npx -y --package=task-master-ai task-master-ai"
claude mcp add context7 "npx @upstash/context7-mcp"
```

**2. Permission Issues**
```bash
# Fix npm global permissions (Unix/Linux/macOS)
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
```

**3. Task-Master Parse-PRD Fails**
- Ensure API keys are configured
- Check PRD file format and location
- Verify Taskmaster AI version: `task-master --version`

### Configuration File Locations

- **Claude Code Config**: `~/.claude.json` or project-specific `.claude.json`
- **NPM Global Packages**: `~/.npm-global/` or system npm directory
- **Environment Variables**: `~/.bashrc`, `~/.zshrc`, or system environment

## Development Workflow Integration

### 1. Project Planning Phase
1. Create PRD using `.taskmaster/templates/prd_template.txt`
2. Use Context7 for research and external information gathering
3. Use Taskmaster AI to generate implementation tasks
4. Review and refine PRD based on task breakdown

### 2. Implementation Phase
1. Follow tasks generated by Taskmaster AI
2. Use Context7 for real-time problem solving and research
3. Update task status using TodoWrite/TodoRead tools
4. Document learnings and update PRDs as needed

### 3. Quality Assurance Phase
1. Use Context7 to research testing best practices
2. Validate implementation against PRD requirements
3. Update documentation based on final implementation

## Best Practices

### Taskmaster AI
- Keep PRDs focused on single features or problems
- Provide extensive context in PRDs for better AI task generation
- Regularly update PRDs based on implementation learnings
- Use consistent file naming and organization

### Context7
- Use for research when you need current information
- Combine with local knowledge for comprehensive solutions
- Document findings for future reference
- Use when investigating unfamiliar technologies or errors

### General MCP Server Management
- Regularly check server health with `claude mcp list`
- Keep packages updated: `npm update -g task-master-ai @upstash/context7-mcp`
- Monitor for new versions and features
- Back up important PRDs and configuration files

## Security Considerations

- Store API keys as environment variables, never in code
- Use project-specific configurations when possible
- Regularly rotate API keys
- Be mindful of data sent to external services
- Review MCP server permissions and access levels

## Support and Resources

- **Taskmaster AI**: [Documentation and updates]
- **Context7**: [@upstash/context7-mcp on npm](https://www.npmjs.com/package/@upstash/context7-mcp)
- **Claude Code MCP**: [Anthropic MCP Documentation](https://docs.anthropic.com/en/docs/claude-code/mcp)
- **Troubleshooting**: Check server health and logs with `claude mcp list -v`

---

## Quick Setup Script

For quick setup on new instances:

```bash
#!/bin/bash
# Quick MCP Server Setup Script

echo "Installing Taskmaster AI and Context7..."

# Install packages
npm install -g task-master-ai @upstash/context7-mcp

# Configure MCP servers
claude mcp add taskmaster-ai "npx -y --package=task-master-ai task-master-ai"
claude mcp add context7 "npx @upstash/context7-mcp"

# Verify setup
echo "Verifying setup..."
claude mcp list

echo "Setup complete! MCP servers are ready for use."
```

Save this script as `setup-mcp-servers.sh` and run with `bash setup-mcp-servers.sh` for automated setup.